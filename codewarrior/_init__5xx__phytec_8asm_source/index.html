<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Project Yasiki: Decompilation of Luigi's Mansion.">
    <link rel="stylesheet" href="https://moddi.dev/Yasiki/assets/style.css">
    <link href="https://fonts.googleapis.com/css2?family=Reggae+One&disp=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Nunito&disp=swap" rel="stylesheet">
    <link rel="icon" href="https://moddi.dev/Yasiki/assets/favicon.ico" type="image/x-icon">
    <title>File Init_5xx_phytec.asm - Project Yasiki</title>
  </head>
  <body>
    <div class="container">
      <nav>
        <ul>
        </ul>
      </nav>

      <!--Upper bar-->
      <div id="bar">

          <!--Project text / logo-->
          <a id="barTitle" href="https://moddi.dev/Yasiki/"><b>Project Yasiki</b></a>
          <div style="display: flex; flex-direction: column; align-items: start;">
            
            <!--Both progress badges-->
            <a href="https://github.com/Moddimation/Yasiki">
              <img style="padding-top:10px; width: 90px;" src="https://decomp.dev/Moddimation/Yasiki.svg?mode=shield&measure=code&label=Code" alt="Go to github repo">
            </a>
            <a href="https://decomp.dev/Moddimation/Yasiki">
              <img style="padding-bottom:0px; width: 123px;" src="https://decomp.dev/Moddimation/Yasiki.svg?mode=shield&measure=functions&label=Progress" alt="Go to progress page">
            </a>
          </div>
          
          <p> </p>
          
          <!--Add each nav head here-->
            <li>
              <button onclick="window.location.href='https://moddi.dev/Yasiki/files/'">Files</button>
            </li>
            <li>
              <button onclick="window.location.href='https://moddi.dev/Yasiki/classes/'">Classes</button>
            </li>
            <li>
              <button onclick="window.location.href='https://moddi.dev/Yasiki/wiki/'">Full Wiki</button>
            </li>
      </div>
      
      <h1 id="file-init_5xx_phytecasm">File Init_5xx_phytec.asm</h1>
<p><a href="../files/"><strong>File List</strong></a> <strong>&gt;</strong> <a href="../dir_5331e34b666a7435d77010d6d501c7d4/"><strong>CodeWarrior</strong></a> <strong>&gt;</strong> <a href="../dir_5715a3597842aab210f9a54cf5907db0/"><strong>PowerPC_EABI_Support</strong></a> <strong>&gt;</strong> <a href="../dir_e69745e3285a8d4f155d29d88e1a7b6b/"><strong>Runtime</strong></a> <strong>&gt;</strong> <a href="../dir_1789e36d750963f536ec280b459db2bf/"><strong>Src</strong></a> <strong>&gt;</strong> <a href="../_init__5xx__phytec_8asm/"><strong>Init_5xx_phytec.asm</strong></a></p>
<p><a href="../_init__5xx__phytec_8asm/">Go to the documentation of this file</a></p>
<pre><code class="language-C++">;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;
; Phytec PPC 505 initialization code. 
;
;
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

    .globl      usr_init

    .section   .init,4,1,6

;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;;
;;  usr_init
;;
;;  Performs board-specific initializations.
;;
;;
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

usr_init:
; Disable watchdog
    lis     r3, 0x0
    ori     r3, r3, 0x0
    lis     r4, 0x8007
    ori     r4, r4, 0xEFC4
    stw     r3, 0(r4)

; UART (CS3)
    lis     r3, 0x0010
    ori     r3, r3, 0x0
    lis     r4, 0x8007
    ori     r4, r4, 0xFDD0
    stw     r3, 0(r4)

    lis     r3, 0x9084
    ori     r3, r3, 0xC001
    lis     r4, 0x8007
    ori     r4, r4, 0xFDD4
    stw     r3, 0(r4)

; second SRAM (CS2)
    lis     r3, 0x0004
    ori     r3, r3, 0x0
    lis     r4, 0x8007
    ori     r4, r4, 0xFDD8
    stw     r3, 0(r4)

    lis     r3, 0x7003
    ori     r3, r3, 0xC005
    lis     r4, 0x8007
    ori     r4, r4, 0xFDDC
    stw     r3, 0(r4)

; first SRAM (CS1)
    lis     r3, 0x0
    ori     r3, r3, 0x0
    lis     r4, 0x8007
    ori     r4, r4, 0xFDE0
    stw     r3, 0(r4)

    lis     r3, 0x7003
    ori     r3, r3, 0xC005
    lis     r4, 0x8007
    ori     r4, r4, 0xFDE4
    stw     r3, 0(r4)


; SCCR setup
    lis     r3, 0x0
    ori     r3, r3, 0x0
    lis     r4, 0x8007
    ori     r4, r4, 0xFC50
    stw     r3, 0(r4)

;  MSR setup
    lis     r3, 0x0
    ori     r3, r3, 0x3002
    mtmsr   r3

    blr
</code></pre>
        <script src="../../search/main.js"></script>
    </div>
  </body>
</html>