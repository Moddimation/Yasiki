<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Project Yasiki: Decompilation of Luigi's Mansion.">
    <link rel="stylesheet" href="https://moddi.dev/Yasiki/assets/style.css">
    <link href="https://fonts.googleapis.com/css2?family=Reggae+One&disp=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Nunito&disp=swap" rel="stylesheet">
    <link rel="icon" href="https://moddi.dev/Yasiki/assets/favicon.ico" type="image/x-icon">
    <title>File assert.c - Project Yasiki</title>
  </head>
  <body>
    <div class="container">
      <nav>
        <ul>
        </ul>
      </nav>

      <!--Upper bar-->
      <div id="bar">

          <!--Project text / logo-->
          <a id="barTitle" href="https://moddi.dev/Yasiki/"><b>Project Yasiki</b></a>
          <div style="display: flex; flex-direction: column; align-items: start;">
            
            <!--Both progress badges-->
            <a href="https://github.com/Moddimation/Yasiki">
              <img style="padding-top:10px; width: 90px;" src="https://decomp.dev/Moddimation/Yasiki.svg?mode=shield&measure=code&label=Code" alt="Go to github repo">
            </a>
            <a href="https://decomp.dev/Moddimation/Yasiki">
              <img style="padding-bottom:0px; width: 123px;" src="https://decomp.dev/Moddimation/Yasiki.svg?mode=shield&measure=functions&label=Progress" alt="Go to progress page">
            </a>
          </div>
          
          <p> </p>
          
          <!--Add each nav head here-->
            <li>
              <button onclick="window.location.href='https://moddi.dev/Yasiki/files/'">Files</button>
            </li>
            <li>
              <button onclick="window.location.href='https://moddi.dev/Yasiki/classes/'">Classes</button>
            </li>
            <li>
              <button onclick="window.location.href='https://moddi.dev/Yasiki/wiki/'">Full Wiki</button>
            </li>
      </div>
      
      <h1 id="file-assertc">File assert.c</h1>
<p><a href="../files/"><strong>File List</strong></a> <strong>&gt;</strong> <a href="../dir_5331e34b666a7435d77010d6d501c7d4/"><strong>CodeWarrior</strong></a> <strong>&gt;</strong> <a href="../dir_5715a3597842aab210f9a54cf5907db0/"><strong>PowerPC_EABI_Support</strong></a> <strong>&gt;</strong> <a href="../dir_f3cdfadcca1881c964e98cde56e67e68/"><strong>Msl</strong></a> <strong>&gt;</strong> <a href="../dir_30eb297d72d9bf6e37ae97b245365a16/"><strong>MSL_C</strong></a> <strong>&gt;</strong> <a href="../dir_5ff331ae3d8ec7992933a87ab898fc05/"><strong>MSL_Common</strong></a> <strong>&gt;</strong> <a href="../dir_296ea1c022f8cfa02577b9a5b06211f5/"><strong>Src</strong></a> <strong>&gt;</strong> <a href="../assert_8c/"><strong>assert.c</strong></a></p>
<p><a href="../assert_8c/">Go to the documentation of this file</a></p>
<pre><code class="language-C++">/*  Metrowerks Standard Library  */

/*  $Date: 1999/07/30 00:58:41 $ 
 *  $Revision: 1.7.4.1 $ 
 *  $NoKeywords: $ 
 *
 *      Copyright 1995-1999 Metrowerks, Inc.
 *      All rights reserved.
 */

/*
 *  assert.c
 *  
 *  Routines
 *  --------
 *      __assertion_failed
 *
 *
 */

#include &lt;ansi_parms.h&gt;

#if (__dest_os == __win32_os  || __dest_os == __wince_os)
/*
hh 980122 Replaced &lt;windows.h&gt; with the following four includes because it is seriously
          broken.  The following 4 includes must be carefully ordered as shown, because
          they are broken too.
#include &lt;windows.h&gt;
*/
#include &lt;WINDEF.H&gt;
#include &lt;WINNT.H&gt;
#include &lt;WINBASE.H&gt;
#include &lt;WINUSER.H&gt;
#endif

#include &lt;assert.h&gt;
#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;

#if(defined(UNICODE))
void __wchar_assertion_failed(TCHAR const *condition, char const *filename, /* mm 990419 */
                                                                        int lineno)
{
    #define BUFFSIZE 1024
    TCHAR buf[2*BUFFSIZE];
    /* need to convert filename into a L string literal */
    int i=0;
    wchar_t tmpfile[BUFFSIZE];
    char const * p=filename;                    /* mm 990419 */     
    while(*p != 0x00 &amp;&amp; i &lt; (BUFFSIZE-1)) 
    {
        tmpfile[i] = (wchar_t)*(p++);
        i++;
    }

    tmpfile[i]=0;
    swprintf(buf,sizeof(buf) + 1,L&quot;Assertion (%s) failed in \&quot;%s\&quot; on line %d\n&quot;, condition, tmpfile, lineno);
    MessageBox(NULL,buf,L&quot;Assertion Failure&quot;,MB_OK);

    abort();
}
#else
#if(__dest_os == __wince_os)
 #error &quot;the macro UNICODE must be defined when compiling MSL C for Windows CE&quot;
#endif
void __assertion_failed(char const *condition, char const *filename, int lineno) /* mm 990419 */
{
#if (__dest_os == __win32_os)

    char buf[4096];
    sprintf(buf,&quot;Assertion (%s) failed in \&quot;%s\&quot; on line %d\n&quot;, condition, filename, lineno);
    MessageBox(NULL,buf,&quot;Assertion Failure&quot;,MB_OK);

#else

    fprintf(stderr, &quot;Assertion (%s) failed in \&quot;%s\&quot; on line %d\n&quot;, condition, filename, lineno);

#endif

#if _WINSIOUX                   /* mm 981109 */
    WinSIOUXAbort();            /* mm 981109 */
#else                           /* mm 981109 */
    abort();
#endif/* _WINSIOUX */           /* mm 981109 */
}
#endif /*  UNICODE */

/*     Change record
 *  12-Jun-95 JFH  First code release.
 *  16-Jun-95  MM  Added include of signal.h and code to replace abort()
 *            JFH  !! I consider this a temporary change to ease Michael's testing !!
 *  18-Sep-95 JFH  Undid previous change. abort() should behave properly now.
 *  26-Apr-96 JFH  Merged Win32 changes in.
 *                      CTV
 * hh 980122 Replaced &lt;windows.h&gt; with the following four includes because it is seriously
          broken.  The following 4 includes must be carefully ordered as shown, because
          they are broken too.
 * mf 980428 added support for windows ce-- do not need to explicitly include x86_prefix.h
             since it is included by ansi_parms.h
* mf  980510 added new function __whar_assertion_failed to support unicode.  This was due to
             microsoft's version of swprintf not being standard. the ms implementation of tchar
             maps tsprintf into the ms implementation of swprintf if UNICODE is defined. our implementation
             is different(takes an int arg to limit size of string as specified in the standard.                       
* mf  980512       wince changes   
* mf  980515 needed windows headers before standard headers and therefore needed to also
*            put include of ansi_parms first so that WIN32 env. is defined before prototype
*            of MessageBox          
* mm 981109  Changed __assertion_failed so that when __WINSIOUX defined, responding to 
             assertion failure box does not terminate WinSIOUX.
* mm 990419  Changes to avoid messages when warnings when #pragma const_strings on in force IL9903-1579       
*/
</code></pre>
        <script src="../../search/main.js"></script>
    </div>
  </body>
</html>