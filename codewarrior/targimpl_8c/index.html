<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Project Yasiki: Decompilation of Luigi's Mansion.">
    <link rel="stylesheet" href="https://moddi.dev/Yasiki/assets/style.css">
    <link href="https://fonts.googleapis.com/css2?family=Reggae+One&disp=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Nunito&disp=swap" rel="stylesheet">
    <link rel="icon" href="https://moddi.dev/Yasiki/assets/favicon.ico" type="image/x-icon">
    <title>Macro Syntax Error - Project Yasiki</title>
  </head>
  <body>
    <div class="container">
      <nav>
        <ul>
        </ul>
      </nav>

      <!--Upper bar-->
      <div id="bar">

          <!--Project text / logo-->
          <a id="barTitle" href="https://moddi.dev/Yasiki/"><b>Project Yasiki</b></a>
          <div style="display: flex; flex-direction: column; align-items: start;">
            
            <!--Both progress badges-->
            <a href="https://github.com/Moddimation/Yasiki">
              <img style="padding-top:10px; width: 90px;" src="https://decomp.dev/Moddimation/Yasiki.svg?mode=shield&measure=code&label=Code" alt="Go to github repo">
            </a>
            <a href="https://decomp.dev/Moddimation/Yasiki">
              <img style="padding-bottom:0px; width: 123px;" src="https://decomp.dev/Moddimation/Yasiki.svg?mode=shield&measure=functions&label=Progress" alt="Go to progress page">
            </a>
          </div>
          
          <p> </p>
          
          <!--Add each nav head here-->
            <li>
              <button onclick="window.location.href='https://moddi.dev/Yasiki/files/'">Files</button>
            </li>
            <li>
              <button onclick="window.location.href='https://moddi.dev/Yasiki/classes/'">Classes</button>
            </li>
            <li>
              <button onclick="window.location.href='https://moddi.dev/Yasiki/wiki/'">Full Wiki</button>
            </li>
      </div>
      
      <h1 id="macro-syntax-error"><em>Macro Syntax Error</em></h1>
<p><em>File</em>: <code>codewarrior/targimpl_8c.md</code></p>
<p><em>Line 70 in Markdown file:</em> <strong>Missing end of comment tag</strong></p>
<pre><code class="language-markdown">|  psr&amp;lt;&amp;lt; 21)\|(rDest&amp;lt;&amp;lt; 16)\|(w&amp;lt;&amp;lt; 15)\|(gqr&amp;lt;&amp;lt; 12) ﾂ･\|offset)#define [**INSTR\_PSQ\_L**](targimpl_8c.md#define-instr_psq_l)(psr, offset, rSrc, w, gqr)(0xE0000000\|(psr&amp;lt;&amp;lt; 21)\|(rSrc&amp;lt;&amp;lt; 16)\|(w&amp;lt;&amp;lt; 15)\|(gqr&amp;lt;&amp;lt; 12)\|offset)#define [**INSTR\_STW**](targimpl_8c.md#define-instr_stw)(rSrc, offset, rDest)(0x90000000\|(rSrc&amp;lt;&amp;lt; 21)\|(rDest&amp;lt;&amp;lt; 16)\|offset)#define [**INSTR\_LWZ**](targimpl_8c.md#define-instr_lwz)(rDest, offset, rSrc)(0x80000000\|(rDest&amp;lt;&amp;lt; 21)\|(rSrc&amp;lt;&amp;lt; 16)\|offset)#define [**INSTR\_STFD**](targimpl_8c.md#define-instr_stfd)(fprSrc, offset, rDest)(0xD8000000\|(fprSrc&amp;lt;&amp;lt; 21)\|(rDest&amp;lt;&amp;lt; 16)\|offset)#define [**INSTR\_LFD**](targimpl_8c.md#define-instr_lfd)(fprDest, offset, rSrc)(0xC8000000\|(fprDest&amp;lt;&amp;lt; 21)\|(rSrc&amp;lt;&amp;lt; 16)\|offset)#define [**INSTR\_MFSPR**](targimpl_8c.md#define-instr_mfspr)(rDest, spr)(0x7C000000\|(rDest&amp;lt;&amp;lt; 21)\|((spr &amp;0xFE0)&amp;lt;&amp;lt; 6)\|((spr &amp;0x1F)&amp;lt;&amp;lt; 16) ﾂ･\|0x2A6)#define [**INSTR\_MTSPR**](targimpl_8c.md#define-instr_mtspr)(spr, rSrc)(0x7C000000\|(rSrc&amp;lt;&amp;lt; 21)\|((spr &amp;0xFE0)&amp;lt;&amp;lt; 6)\|((spr &amp;0x1F)&amp;lt;&amp;lt; 16) ﾂ･\|0x3A6)#define [**DSFetch\_u32**](targimpl_8c.md#define-dsfetch_u32)(\_p\_) #define [**DSFetch\_u64**](targimpl_8c.md#define-dsfetch_u64)(\_p\_) [**DSError**](trk_8h.md#typedef-dserror) [**TRKPPCAccessSPR**](targimpl_8c.md#function-trkppcaccessspr)(void \*value, u32 spr\_register\_num, BOOL read);[**DSError**](trk_8h.md#typedef-dserror) [**TRKPPCAccessPairedSingleRegister**](targimpl_8c.md#function-trkppcaccesspairedsingleregister)(void \*srcDestPtr, u32 psr, BOOL read);[**DSError**](trk_8h.md#typedef-dserror) [**TRKPPCAccessFPRegister**](targimpl_8c.md#function-trkppcaccessfpregister)(void \*srcDestPtr, u32 fpr, BOOL read);[**DSError**](trk_8h.md#typedef-dserror) [**TRKPPCAccessSpecialReg**](targimpl_8c.md#function-trkppcaccessspecialreg)(void \*value, u32 \*access\_func, BOOL read);static void [**TRKExceptionHandler**](targimpl_8c.md#function-trkexceptionhandler)(u16);void [**TRKInterruptHandlerEnableInterrupts**](targimpl_8c.md#function-trkinterrupthandlerenableinterrupts)(void);void WriteFPSCR(register f64 \*);void ReadFPSCR(register f64 \*);void \_\_TRK\_set\_MSR(u32 [**msr**](targimpl_8c.md#define-msr));u32 \_\_TRK\_get\_MSR();static void TRK\_ppc\_memcpy(register void \*dest, register const void \*src, register int n, register u32 param\_4, register u32 param\_5);void [**TRKRestoreExtended1Block**](mpc__7xx__603e_8c.md#function-trkrestoreextended1block)();void [**TRKUARTInterruptHandler**](dolphin__trk__glue_8c.md#function-trkuartinterrupthandler)();static BOOL [**TRKTargetCheckStep**](targimpl_8c.md#function-trktargetcheckstep)();asm u32 \_\_TRK\_get\_MSR(){ nofralloc mfmsr [**r3**](e__lgamma__r_8c.md#variable-r3) blr}asm void \_\_TRK\_set\_MSR(register u32 [**msr**](targimpl_8c.md#define-msr)) { nofralloc mtmsr [**msr**](targimpl_8c.md#define-msr) blr}[**DSError**](trk_8h.md#typedef-dserror) TRKValidMemory32(const void \*addr, [**size\_t**](size__t_8h.md#typedef-size_t) length, [**ValidMemoryOptions**](trk_8h.md#enum-validmemoryoptions) readWriteable){ [**DSError**](trk_8h.md#typedef-dserror) err=DS\_InvalidMemory;const u8 \*start;const u8 \*end;s32 i;start=(const u8 \*) addr;end=((const u8 \*) addr+(length - 1));if(end&amp;lt; start) return DS\_InvalidMemory;for(i=0;(i&amp;lt;(s32)(sizeof([**gTRKMemMap**](targimpl_8c.md#variable-gtrkmemmap))/sizeof([**memRange**](structmem_range.md))));i++) { if((start&amp;lt;=(const u8 \*) [**gTRKMemMap**](targimpl_8c.md#variable-gtrkmemmap)[i].end) &amp;&amp;(end &amp;gt;=(const u8 \*) [**gTRKMemMap**](targimpl_8c.md#variable-gtrkmemmap)[i].start)) { if(((readWriteable==VALIDMEM\_Readable) &amp;&amp;![**gTRKMemMap**](targimpl_8c.md#variable-gtrkmemmap)[i].readable)\|\|((readWriteable==VALIDMEM\_Writeable) &amp;&amp;![**gTRKMemMap**](targimpl_8c.md#variable-gtrkmemmap)[i].writeable)) { err=DS\_InvalidMemory;} else { err=DS\_NoError;if(start&amp;lt;(const u8 \*) [**gTRKMemMap**](targimpl_8c.md#variable-gtrkmemmap)[i].start) err=TRKValidMemory32(start,(u32)((const u8 \*) [**gTRKMemMap**](targimpl_8c.md#variable-gtrkmemmap)[i].start - start), readWriteable);if((err==DS\_NoError) &amp;&amp;(end &amp;gt;(const u8 \*) [**gTRKMemMap**](targimpl_8c.md#variable-gtrkmemmap)[i].end)) err=TRKValidMemory32((const u8 \*) [**gTRKMemMap**](targimpl_8c.md#variable-gtrkmemmap)[i].end,(u32)(end -(const u8 \*) [**gTRKMemMap**](targimpl_8c.md#variable-gtrkmemmap)[i].end), readWriteable);} break;} } return err;}static asm void TRK\_ppc\_memcpy(register void \*dest, register const void \*src, register int n, register u32 param\_4, register u32 param\_5) {#define [**msr**](targimpl_8c.md#define-msr) #define [**byte**](targimpl_8c.md#define-byte) #define [**count**](targimpl_8c.md#define-count) nofralloc mfmsr [**msr**](targimpl_8c.md#define-msr) li [**count**](targimpl_8c.md#define-count), 0top\_loop:cmpw [**count**](targimpl_8c.md#define-count), n beq out\_loop mtmsr param\_5 sync lbzx [**byte**](targimpl_8c.md#define-byte), [**count**](targimpl_8c.md#define-count), src mtmsr param\_4 sync stbx [**byte**](targimpl_8c.md#define-byte), [**count**](targimpl_8c.md#define-count), dest addi [**count**](targimpl_8c.md#define-count), [**count**](targimpl_8c.md#define-count), 1 b top\_loopout\_loop:mtmsr [**msr**](targimpl_8c.md#define-msr) sync blr}[**DSError**](trk_8h.md#typedef-dserror) [**TRKTargetAccessMemory**](targimpl_8h.md#function-trktargetaccessmemory)(void \*data, u32 start, [**size\_t**](size__t_8h.md#typedef-size_t) \*length, [**MemoryAccessOptions**](trk_8h.md#enum-memoryaccessoptions) accessOptions, BOOL read){ [**DSError**](trk_8h.md#typedef-dserror) error;u32 target\_msr;void \*addr;u32 trk\_msr;[**TRKExceptionStatus**](struct_t_r_k_exception_status.md) tempExceptionStatus=[**gTRKExceptionStatus**](targimpl_8c.md#variable-gtrkexceptionstatus);gTRKExceptionStatus.exceptionDetected=FALSE;addr=(void \*) [**TRKTargetTranslate**](dolphin__trk_8h.md#function-trktargettranslate)(start);error=TRKValidMemory32(addr, \*length, read ? VALIDMEM\_Readable :VALIDMEM\_Writeable);if(error !=DS\_NoError) { \*length=0;} else { target\_msr=\_\_TRK\_get\_MSR();trk\_msr=target\_msr\|gTRKCPUState.Extended1.MSR &amp;0x10;if(read) { TRK\_ppc\_memcpy(data, addr, \*length, target\_msr, trk\_msr);} else { TRK\_ppc\_memcpy(addr, data, \*length, trk\_msr, target\_msr);[**TRK\_flush\_cache**](flush__cache_8h.md#function-trk_flush_cache)(addr, \*length);if((void \*) start !=addr) { [**TRK\_flush\_cache**](flush__cache_8h.md#function-trk_flush_cache)((void \*) start, \*length);} } } if(gTRKExceptionStatus.exceptionDetected) { \*length=0;error=DS\_CWDSException;} [**gTRKExceptionStatus**](targimpl_8c.md#variable-gtrkexceptionstatus)=tempExceptionStatus;return error;}[**DSError**](trk_8h.md#typedef-dserror) TRKTargetReadInstruction(void \*data, u32 start){ [**DSError**](trk_8h.md#typedef-dserror) error;[**size\_t**](size__t_8h.md#typedef-size_t) registersLength=4;error=[**TRKTargetAccessMemory**](targimpl_8h.md#function-trktargetaccessmemory)(data, start, &amp;registersLength, MEMACCESS\_UserMemory, TRUE);if(error==DS\_NoError &amp;&amp;registersLength !=4) { error=DS\_InvalidMemory;} return error;}[**DSError**](trk_8h.md#typedef-dserror) [**TRKTargetAccessDefault**](targimpl_8h.md#function-trktargetaccessdefault)(u32 firstRegister, u32 lastRegister, [**TRKBuffer**](struct_t_r_k_buffer.md) \*b, [**size\_t**](size__t_8h.md#typedef-size_t) \*registersLengthPtr, BOOL read){ [**DSError**](trk_8h.md#typedef-dserror) error;u32 [**count**](targimpl_8c.md#define-count);u32 \*data;[**TRKExceptionStatus**](struct_t_r_k_exception_status.md) tempExceptionStatus;if(lastRegister &amp;gt; 0x24) { return DS\_InvalidRegister;} tempExceptionStatus=[**gTRKExceptionStatus**](targimpl_8c.md#variable-gtrkexceptionstatus);data=gTRKCPUState.Default.GPR+firstRegister;[**count**](targimpl_8c.md#define-count)=(lastRegister - firstRegister)+1;gTRKExceptionStatus.exceptionDetected=FALSE;\*registersLengthPtr=[**count**](targimpl_8c.md#define-count) \*sizeof(u32);if(read) { error=[**TRKAppendBuffer\_ui32**](msgbuf_8h.md#function-trkappendbuffer_ui32)(b, data, [**count**](targimpl_8c.md#define-count));} else { error=[**TRKReadBuffer\_ui32**](msgbuf_8h.md#function-trkreadbuffer_ui32)(b, data, [**count**](targimpl_8c.md#define-count));} if(gTRKExceptionStatus.exceptionDetected) { \*registersLengthPtr=0;error=DS\_CWDSException;} [**gTRKExceptionStatus**](targimpl_8c.md#variable-gtrkexceptionstatus)=tempExceptionStatus;return error;}[**DSError**](trk_8h.md#typedef-dserror) [**TRKTargetAccessFP**](targimpl_8h.md#function-trktargetaccessfp)(u32 firstRegister, u32 lastRegister, [**TRKBuffer**](struct_t_r_k_buffer.md) \*b, [**size\_t**](size__t_8h.md#typedef-size_t) \*registersLengthPtr, BOOL read){ u64 temp;[**DSError**](trk_8h.md#typedef-dserror) error;[**TRKExceptionStatus**](struct_t_r_k_exception_status.md) tempExceptionStatus;u32 current;if(lastRegister &amp;gt; 0x21) { return DS\_InvalidRegister;} tempExceptionStatus=[**gTRKExceptionStatus**](targimpl_8c.md#variable-gtrkexceptionstatus);gTRKExceptionStatus.exceptionDetected=FALSE;\_\_TRK\_set\_MSR(\_\_TRK\_get\_MSR()\|0x2000);\*registersLengthPtr=0;error=DS\_NoError;for(current=firstRegister;(current&amp;lt;=lastRegister) &amp;&amp;(error==DS\_NoError);current++, \*registersLengthPtr+=sizeof(f64)) { if(read) { [**TRKPPCAccessFPRegister**](targimpl_8c.md#function-trkppcaccessfpregister)(&amp;temp, current, read);error=[**TRKAppendBuffer1\_ui64**](msgbuf_8h.md#function-trkappendbuffer1_ui64)(b, temp);} else { [**TRKReadBuffer1\_ui64**](msgbuf_8h.md#function-trkreadbuffer1_ui64)(b, &amp;temp);error=[**TRKPPCAccessFPRegister**](targimpl_8c.md#function-trkppcaccessfpregister)(&amp;temp, current, read);} } if(gTRKExceptionStatus.exceptionDetected) { \*registersLengthPtr=0;error=DS\_CWDSException;} [**gTRKExceptionStatus**](targimpl_8c.md#variable-gtrkexceptionstatus)=tempExceptionStatus;return error;}[**DSError**](trk_8h.md#typedef-dserror) [**TRKTargetAccessExtended1**](targimpl_8h.md#function-trktargetaccessextended1)(u32 firstRegister, u32 lastRegister, [**TRKBuffer**](struct_t_r_k_buffer.md) \*b, [**size\_t**](size__t_8h.md#typedef-size_t) \*registersLengthPtr, BOOL read){ [**TRKExceptionStatus**](struct_t_r_k_exception_status.md) tempExceptionStatus;int error;u32 \*data;int [**count**](targimpl_8c.md#define-count);if(lastRegister &amp;gt; 0x60) { return DS\_InvalidRegister;} tempExceptionStatus=[**gTRKExceptionStatus**](targimpl_8c.md#variable-gtrkexceptionstatus);gTRKExceptionStatus.exceptionDetected=FALSE;\*registersLengthPtr=0;if(firstRegister&amp;lt;=lastRegister) { data=(u32 \*)&amp;gTRKCPUState.Extended1+firstRegister;[**count**](targimpl_8c.md#define-count)=lastRegister - firstRegister+1;\*registersLengthPtr+=[**count**](targimpl_8c.md#define-count) \*sizeof(u32);if(read) { error=[**TRKAppendBuffer\_ui32**](msgbuf_8h.md#function-trkappendbuffer_ui32)(b, data, [**count**](targimpl_8c.md#define-count));} else { if(data&amp;lt;=&amp;gTRKCPUState.Extended1.TBU &amp;&amp;(data+[**count**](targimpl_8c.md#define-count) - 1) &amp;gt;=&amp;gTRKCPUState.Extended1.TBL) { gTRKRestoreFlags.TBR=1;} if(data&amp;lt;=&amp;gTRKCPUState.Extended1.DEC &amp;&amp;(data+[**count**](targimpl_8c.md#define-count) - 1) &amp;gt;=&amp;gTRKCPUState.Extended1.DEC) { gTRKRestoreFlags.DEC=1;} error=[**TRKReadBuffer\_ui32**](msgbuf_8h.md#function-trkreadbuffer_ui32)(b, data, [**count**](targimpl_8c.md#define-count));} } if(gTRKExceptionStatus.exceptionDetected) { \*registersLengthPtr=0;error=DS\_CWDSException;} [**gTRKExceptionStatus**](targimpl_8c.md#variable-gtrkexceptionstatus)=tempExceptionStatus;return error;}[**DSError**](trk_8h.md#typedef-dserror) [**TRKTargetAccessExtended2**](targimpl_8h.md#function-trktargetaccessextended2)(u32 firstRegister, u32 lastRegister, [**TRKBuffer**](struct_t_r_k_buffer.md) \*b, [**size\_t**](size__t_8h.md#typedef-size_t) \*registerStorageSize, BOOL read){ [**TRKExceptionStatus**](struct_t_r_k_exception_status.md) savedException;u32 i;u32 value\_buf0[1];u32 value\_buf[2];[**DSError**](trk_8h.md#typedef-dserror) err;u32 access\_func[10];if(lastRegister &amp;gt; 0x1f) return DS\_InvalidRegister;savedException=[**gTRKExceptionStatus**](targimpl_8c.md#variable-gtrkexceptionstatus);gTRKExceptionStatus.exceptionDetected=FALSE;[**TRKPPCAccessSPR**](targimpl_8c.md#function-trkppcaccessspr)(value\_buf0, [**SPR\_HID2**](trk_8h.md#define-spr_hid2), TRUE);value\_buf0[0]\|=0xA0000000;[**TRKPPCAccessSPR**](targimpl_8c.md#function-trkppcaccessspr)(value\_buf0, [**SPR\_HID2**](trk_8h.md#define-spr_hid2), FALSE);value\_buf0[0]=0;[**TRKPPCAccessSPR**](targimpl_8c.md#function-trkppcaccessspr)(value\_buf0, [**SPR\_GQR0**](trk_8h.md#define-spr_gqr0), FALSE);\*registerStorageSize=0;err=DS\_NoError;for(i=firstRegister;(i&amp;lt;=lastRegister) &amp;&amp;(err==DS\_NoError);i++) { if(read) { err=[**TRKPPCAccessPairedSingleRegister**](targimpl_8c.md#function-trkppcaccesspairedsingleregister)((u64 \*) value\_buf, i, read);err=[**TRKAppendBuffer1\_ui64**](msgbuf_8h.md#function-trkappendbuffer1_ui64)(b, \*(u64 \*) value\_buf);} else { err=[**TRKReadBuffer1\_ui64**](msgbuf_8h.md#function-trkreadbuffer1_ui64)(b,(u64 \*) value\_buf);err=[**TRKPPCAccessPairedSingleRegister**](targimpl_8c.md#function-trkppcaccesspairedsingleregister)((u64 \*) value\_buf, i, read);} \*registerStorageSize+=sizeof(u64);} if(gTRKExceptionStatus.exceptionDetected) { \*registerStorageSize=0;err=DS\_CWDSException;} [**gTRKExceptionStatus**](targimpl_8c.md#variable-gtrkexceptionstatus)=savedException;return err;}[**DSError**](trk_8h.md#typedef-dserror) [**TRKTargetVersions**](targimpl_8h.md#function-trktargetversions)([**DSVersions**](struct_d_s_versions.md) \*versions){ versions-&amp;gt; | [**kernelMajor**](#variable-kernelmajor)   = `0`&lt;br&gt; |
</code></pre>
        <script src="../../search/main.js"></script>
    </div>
  </body>
</html>