<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Project Yasiki: Decompilation of Luigi's Mansion.">
    <link rel="stylesheet" href="https://moddi.dev/Yasiki/assets/style.css">
    <link href="https://fonts.googleapis.com/css2?family=Reggae+One&disp=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Nunito&disp=swap" rel="stylesheet">
    <link rel="icon" href="https://moddi.dev/Yasiki/assets/favicon.ico" type="image/x-icon">
    <title>File ios.cpp - Project Yasiki</title>
  </head>
  <body>
    <div class="container">
      <nav>
        <ul>
        </ul>
      </nav>

      <!--Upper bar-->
      <div id="bar">

          <!--Project text / logo-->
          <a id="barTitle" href="https://moddi.dev/Yasiki/"><b>Project Yasiki</b></a>
          <div style="display: flex; flex-direction: column; align-items: start;">
            
            <!--Both progress badges-->
            <a href="https://github.com/Moddimation/Yasiki">
              <img style="padding-top:10px; width: 90px;" src="https://decomp.dev/Moddimation/Yasiki.svg?mode=shield&measure=code&label=Code" alt="Go to github repo">
            </a>
            <a href="https://decomp.dev/Moddimation/Yasiki">
              <img style="padding-bottom:0px; width: 123px;" src="https://decomp.dev/Moddimation/Yasiki.svg?mode=shield&measure=functions&label=Progress" alt="Go to progress page">
            </a>
          </div>
          
          <p> </p>
          
          <!--Add each nav head here-->
            <li>
              <button onclick="window.location.href='https://moddi.dev/Yasiki/files/'">Files</button>
            </li>
            <li>
              <button onclick="window.location.href='https://moddi.dev/Yasiki/classes/'">Classes</button>
            </li>
            <li>
              <button onclick="window.location.href='https://moddi.dev/Yasiki/wiki/'">Full Wiki</button>
            </li>
      </div>
      
      <h1 id="file-ioscpp">File ios.cpp</h1>
<p><a href="../files/"><strong>File List</strong></a> <strong>&gt;</strong> <a href="../dir_5331e34b666a7435d77010d6d501c7d4/"><strong>CodeWarrior</strong></a> <strong>&gt;</strong> <a href="../dir_5715a3597842aab210f9a54cf5907db0/"><strong>PowerPC_EABI_Support</strong></a> <strong>&gt;</strong> <a href="../dir_f3cdfadcca1881c964e98cde56e67e68/"><strong>Msl</strong></a> <strong>&gt;</strong> <a href="../dir_1d8bcf55c9e1564519df8a05b1def2d1/"><strong>MSL_C++</strong></a> <strong>&gt;</strong> <a href="../dir_fc42de24ef3c14a5dea3aca327bd2ec9/"><strong>MSL_Common</strong></a> <strong>&gt;</strong> <a href="../dir_5dfda252c22d458fde1d653b341676b1/"><strong>Src</strong></a> <strong>&gt;</strong> <a href="../ios_8cpp/"><strong>ios.cpp</strong></a></p>
<p><a href="../ios_8cpp/">Go to the documentation of this file</a></p>
<pre><code class="language-C++">/*  Metrowerks Standard Library  */

/*  $Date: 1999/12/09 17:58:23 $ 
 *  $Revision: 1.7.6.1 $ 
 *  $NoKeywords: $ 
 *
 *      Portions Copyright 1995-1999 Metrowerks, Inc.
 *      All rights reserved.
 */

#include &lt;ios&gt;

#ifndef _MSL_NO_IO

#ifndef _MSL_NO_CPP_NAMESPACE
    namespace std {
#endif

locale
ios_base::imbue(const locale&amp; loc)
{
    locale result = *loc_;
#ifndef _MSL_NO_EXCEPTIONS
    try
    {
#endif
        locale* newloc = new locale(loc);
    #ifdef _MSL_NO_EXCEPTIONS
        if (newloc == 0)
            __msl_error(&quot;ios_base::imbue out of memory&quot;);
    #endif
        delete loc_;
        loc_ = newloc;
        do_callbacks(imbue_event);
#ifndef _MSL_NO_EXCEPTIONS
    }
    catch (...)
    {
        setstate(badbit);
    }
#endif
    return result;
}

long&amp;
ios_base::iword(int index)
{
    if (++index &gt; isize_)
    {
        long* newarray = static_cast&lt;long*&gt;(realloc(iarray_, index * sizeof(long)));
        if (newarray == 0)
        {
            setstate(failbit);
            static long err;
            err = 0;
            return err;
        }
        copy(iarray_, iarray_ + isize_, newarray);
        fill(newarray + isize_, newarray + index, 0L);
        iarray_ = newarray;
        isize_ = static_cast&lt;size_t&gt;(index);
    }
    return iarray_[--index];
}

void*&amp;
ios_base::pword(int index)
{
    if (++index &gt; psize_)
    {
        void** newarray = static_cast&lt;void**&gt;(realloc(parray_, index * sizeof(void*)));
        if (newarray == 0)
        {
            setstate(failbit);
            static void* err;
            err = 0;
            return err;
        }
        copy(parray_, parray_ + psize_, newarray);
        fill(newarray + psize_, newarray + index, static_cast&lt;void*&gt;(0));
        parray_ = newarray;
        psize_ = static_cast&lt;size_t&gt;(index);
    }
    return parray_[--index];
}

ios_base::~ios_base()
{
    do_callbacks(erase_event);
    delete loc_;
    free(parray_);
    free(iarray_);
    free(cb_vec_);
}

void
ios_base::register_callback(event_callback fn, int index)
{
    if (cb_siz_ &gt;= cb_cap_)
    {
        size_t new_cap = cb_cap_;
        if (new_cap == 0)
            new_cap = 1;
        else
            new_cap *= 2;
        event_data* newevents = static_cast&lt;event_data*&gt;(realloc(cb_vec_, new_cap*sizeof(event_data)));
        if (newevents == 0)
        {
            setstate(badbit);
            return;
        }
        cb_vec_ = newevents;
        cb_cap_ = new_cap;
    }
    cb_vec_[cb_siz_++] = event_data(fn, index);
}

void
ios_base::init(void* sb)
{
    rdbuf_ = sb;
    exceptions_ = goodbit;
    iostate_ = sb != 0 ? goodbit : badbit;
    fmtflags_ = skipws | dec;
    width_ = 0;
    precision_ = 6;
    loc_ = 0;
#ifndef _MSL_NO_EXCEPTIONS
    try
    {
#endif
        loc_ = new locale;
#ifndef _MSL_NO_EXCEPTIONS
    }
    catch (...)
    {
    }
#endif
    if (loc_ == 0)
        iostate_ = badbit;
    cb_vec_ = 0;
    cb_siz_ = 0;
    cb_cap_ = 0;
    iarray_ = 0;
    isize_ = 0;
    parray_ = 0;
    psize_ = 0;
}

void
ios_base::copy_ios_base(const ios_base&amp; rhs)
{
#ifndef _MSL_NO_EXCEPTIONS
    try
    {
#endif
        if (cb_cap_ &lt; rhs.cb_siz_)
        {
            event_data* newevents = static_cast&lt;event_data*&gt;(realloc(cb_vec_, rhs.cb_siz_*sizeof(event_data)));
            if (newevents == 0)
            {
                setstate(badbit);
                return;
            }
            cb_vec_ = newevents;
            cb_cap_ = rhs.cb_siz_;
        }
        cb_siz_ = rhs.cb_siz_;
        copy(rhs.cb_vec_, rhs.cb_vec_ + cb_siz_, cb_vec_);

        if (isize_ &lt; rhs.isize_)
        {
            long* newarray = static_cast&lt;long*&gt;(realloc(iarray_, rhs.isize_*sizeof(long)));
            if (newarray == 0)
            {
                setstate(badbit);
                return;
            }
            iarray_ = newarray;
        }
        copy(rhs.iarray_, rhs.iarray_ + rhs.isize_, iarray_);

        if (psize_ &lt; rhs.psize_)
        {
            void** newarray = static_cast&lt;void**&gt;(realloc(parray_, rhs.psize_*sizeof(void*)));
            if (newarray == 0)
            {
                setstate(badbit);
                return;
            }
            parray_ = newarray;
        }
        copy(rhs.parray_, rhs.parray_ + rhs.psize_, parray_);

        locale* newloc = new locale(*rhs.loc_);
    #ifdef _MSL_NO_EXCEPTIONS
        if (newloc == 0)
            __msl_error(&quot;ios_base::copy_ios_base out of memory&quot;);
    #endif
        delete loc_;
        loc_ = newloc;

        precision_ = rhs.precision_;
        width_ = rhs.width_;
        fmtflags_ = rhs.fmtflags_;
#ifndef _MSL_NO_EXCEPTIONS
    }
    catch (...)
    {
        setstate(badbit);
    }
#endif
}

#ifndef _MSL_NO_CPP_NAMESPACE
    } // namespace std
#endif

#endif // _MSL_NO_IO

// hh 990524 Rewrote
</code></pre>
        <script src="../../search/main.js"></script>
    </div>
  </body>
</html>