<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Project Yasiki: Decompilation of Luigi's Mansion.">
    <link rel="stylesheet" href="https://moddi.dev/Yasiki/assets/style.css">
    <link href="https://fonts.googleapis.com/css2?family=Reggae+One&disp=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Nunito&disp=swap" rel="stylesheet">
    <link rel="icon" href="https://moddi.dev/Yasiki/assets/favicon.ico" type="image/x-icon">
    <title>File JSUList.h - Project Yasiki</title>
  </head>
  <body>
    <div class="container">
      <nav>
        <ul>
        </ul>
      </nav>

      <!--Upper bar-->
      <div id="bar">

          <!--Project text / logo-->
          <a id="barTitle" href="https://moddi.dev/Yasiki/"><b>Project Yasiki</b></a>
          <div style="display: flex; flex-direction: column; align-items: start;">
            
            <!--Both progress badges-->
            <a href="https://github.com/Moddimation/Yasiki">
              <img style="padding-top:10px; width: 90px;" src="https://decomp.dev/Moddimation/Yasiki.svg?mode=shield&measure=code&label=Code" alt="Go to github repo">
            </a>
            <a href="https://decomp.dev/Moddimation/Yasiki">
              <img style="padding-bottom:0px; width: 123px;" src="https://decomp.dev/Moddimation/Yasiki.svg?mode=shield&measure=functions&label=Progress" alt="Go to progress page">
            </a>
          </div>
          
          <p> </p>
          
          <!--Add each nav head here-->
            <li>
              <button onclick="window.location.href='https://moddi.dev/Yasiki/files/'">Files</button>
            </li>
            <li>
              <button onclick="window.location.href='https://moddi.dev/Yasiki/classes/'">Classes</button>
            </li>
            <li>
              <button onclick="window.location.href='https://moddi.dev/Yasiki/wiki/'">Full Wiki</button>
            </li>
      </div>
      
      <h1 id="file-jsulisth">File JSUList.h</h1>
<p><a href="../files/"><strong>File List</strong></a> <strong>&gt;</strong> <a href="../dir_0c56b33aa00ddb0e63af648508d6e3f4/"><strong>decomp</strong></a> <strong>&gt;</strong> <a href="../dir_2add8750dabb2c81b6f2c3c5af4cfeba/"><strong>JSystem</strong></a> <strong>&gt;</strong> <a href="../dir_e5be38218225624e70ebb9ea7ff5d81f/"><strong>System</strong></a> <strong>&gt;</strong> <a href="../dir_308f6f999a37d66526675b2f4ad20c02/"><strong>JSupport</strong></a> <strong>&gt;</strong> <a href="../dir_5eac6eb0a6ef103191c6b0789cc9720c/"><strong>include</strong></a> <strong>&gt;</strong> <a href="../_j_s_u_list_8h/"><strong>JSUList.h</strong></a></p>
<p><a href="../_j_s_u_list_8h/">Go to the documentation of this file</a></p>
<pre><code class="language-C++">#ifndef __JSU_LIST_HPP__
#define __JSU_LIST_HPP__

#include &lt;JUTTypes.h&gt;

class JSUPtrList;

struct JSUPtrLink
{
    JSUPtrLink (void* data);
    ~JSUPtrLink ();

    void*       pObject;     
    JSUPtrList* pSupervisor; 
    JSUPtrLink* pNext;       
    JSUPtrLink* pPrev;       
};

SASSERT_SIZE (JSUPtrLink, 0x10);

template &lt;class T&gt;
struct JSULink : public JSUPtrLink
{
    JSULink (void* data)
      : JSUPtrLink (data)
    {}

    ~JSULink () {}

    void*
    getObject ()
    {
        return pObject;
    }

    JSUPtrList*
    getSupervisor ()
    {
        return pSupervisor;
    }

    JSUPtrLink*
    getNext ()
    {
        return pNext;
    }

    JSUPtrLink*
    getPrev ()
    {
        return pPrev;
    }
};

class JSUPtrList
{
public:
    JSUPtrList () { initiate(); }

    JSUPtrList (BOOL do_init);
    ~JSUPtrList ();

    void initiate ();
    void setFirst (JSUPtrLink* link);
    void setLast (JSUPtrLink* link);
    void setNext (JSUPtrLink* link);

    BOOL append (JSUPtrLink* link);
    BOOL prepend (JSUPtrLink* link);
    BOOL insert (JSUPtrLink* last, JSUPtrLink* next);
    BOOL remove (JSUPtrLink* link);

    JSUPtrLink* getNthLink (u32 n) const;

    JSUPtrLink*
    getFirstLink () const
    {
        return pFirst;
    }

    JSUPtrLink*
    getLastLink () const
    {
        return pLast;
    }

    u32
    getNumLinks () const
    {
        return mNumLinks;
    }

protected:
    JSUPtrLink* pFirst;      
    JSUPtrLink* pLast;       
    u32         mNumLinks;   
};

SASSERT_SIZE (JSUPtrList, 0xC);

template &lt;class T&gt;
class JSUList : public JSUPtrList
{
public:
    JSUList (BOOL init)
      : JSUPtrList (init)
    {}

    JSUList ()
      : JSUPtrList()
    {}

    void
    initiate ()
    {
        JSUPtrList::initiate();
    }

    BOOL
    append (JSULink&lt;T&gt;* link)
    {
        return JSUPtrList::append (link);
    }

    BOOL
    prepend (JSULink&lt;T&gt;* link)
    {
        return JSUPtrList::prepend (link);
    }

    BOOL
    insert (JSULink&lt;T&gt;* prev, JSULink&lt;T&gt;* next)
    {
        return JSUPtrList::insert (prev, next);
    }

    BOOL
    remove (JSULink&lt;T&gt;* link)
    {
        return JSUPtrList::remove (link);
    }

    JSULink&lt;T&gt;*
    getFirst () const
    {
        return (JSULink&lt;T&gt;*)JSUPtrList::getFirstLink();
    }

    JSULink&lt;T&gt;*
    getLast () const
    {
        return (JSULink&lt;T&gt;*)JSUPtrList::getLastLink();
    }

    JSULink&lt;T&gt;*
    getEnd () const
    {
        return (JSULink&lt;T&gt;*)Nil;
    }

    u32
    getNumLinks () const
    {
        return JSUPtrList::getNumLinks();
    }
};

template &lt;typename T&gt;
class JSUListIterator
{
public:
    JSUListIterator ()
      : mLink (Nil)
    {}

    JSUListIterator (JSULink&lt;T&gt;* link)
      : mLink (link)
    {}

    JSUListIterator (JSUList&lt;T&gt;* list)
      : mLink (list-&gt;getFirst())
    {}

    JSUListIterator&lt;T&gt;&amp;
    operator= (JSULink&lt;T&gt;* link)
    {
        mLink = link;
        return *this;
    }

    T*
    getObject () const
    {
        return (T*)mLink-&gt;getObject();
    }

    BOOL
    isAvailable ()
    {
        return mLink != Nil;
    }

    BOOL
    operator== (const JSULink&lt;T&gt;* other) const
    {
        return mLink == other;
    }

    BOOL
    operator!= (const JSULink&lt;T&gt;* other) const
    {
        return mLink != other;
    }

    BOOL
    operator== (const JSUListIterator&lt;T&gt;&amp; other) const
    {
        return mLink == other.mLink;
    }

    BOOL
    operator!= (const JSUListIterator&lt;T&gt;&amp; other) const
    {
        return mLink != other.mLink;
    }

    JSUListIterator&lt;T&gt;
    operator++ (int)
    {
        JSUListIterator&lt;T&gt; prev = *this;
        mLink                   = (JSULink&lt;T&gt;*)mLink-&gt;getNext();
        return prev;
    }

    JSUListIterator&lt;T&gt;&amp;
    operator++ ()
    {
        mLink = (JSULink&lt;T&gt;*)mLink-&gt;getNext();
        return *this;
    }

    JSUListIterator&lt;T&gt;
    operator-- (int)
    {
        JSUListIterator&lt;T&gt; prev = *this;
        mLink                   = (JSULink&lt;T&gt;*)mLink-&gt;getPrev();
        return prev;
    }

    JSUListIterator&lt;T&gt;&amp;
    operator-- ()
    {
        mLink = (JSULink&lt;T&gt;*)mLink-&gt;getPrev();
        return *this;
    }

    // T &amp;operator*() { return *getObject(); }

    T*
    operator-&gt;() const
    {
        return (T*)mLink-&gt;getObject();
    }

private:
    JSULink&lt;T&gt;* mLink;
};

template &lt;typename T&gt;
class JSUTree : public JSUList&lt;T&gt;, public JSULink&lt;T&gt;
{
public:
    JSUTree (T* owner)
      : JSUList&lt;T&gt;(),
        JSULink&lt;T&gt; (owner)
    {}

    ~JSUTree () {}

    BOOL
    appendChild (JSUTree&lt;T&gt;* child)
    {
        return append (child);
    }

    BOOL
    prependChild (JSUTree&lt;T&gt;* child)
    {
        return prepend (child);
    }

    BOOL
    removeChild (JSUTree&lt;T&gt;* child)
    {
        return remove (child);
    }

    BOOL
    insertChild (JSUTree&lt;T&gt;* before, JSUTree&lt;T&gt;* child)
    {
        return insert (before, child);
    }

    JSUTree&lt;T&gt;*
    getEndChild () const
    {
        return Nil;
    }

    JSUTree&lt;T&gt;*
    getFirstChild () const
    {
        return (JSUTree&lt;T&gt;*)this-&gt;getFirstLink();
    }

    JSUTree&lt;T&gt;*
    getLastChild () const
    {
        return (JSUTree&lt;T&gt;*)this-&gt;getLastLink();
    }

    JSUTree&lt;T&gt;*
    getNextChild () const
    {
        return (JSUTree&lt;T&gt;*)this-&gt;pNext;
    }

    JSUTree&lt;T&gt;*
    getPrevChild () const
    {
        return (JSUTree&lt;T&gt;*)this-&gt;pPrev;
    }

    u32
    getNumChildren () const
    {
        return JSUList&lt;T&gt;::getNumLinks();
    }

    T*
    getObject () const
    {
        return (T*)this-&gt;pObject;
    }

    JSUTree&lt;T&gt;*
    getParent () const
    {
        return (JSUTree&lt;T&gt;*)this-&gt;pSupervisor;
    }
};

template &lt;typename T&gt;
class JSUTreeIterator
{
public:
    JSUTreeIterator ()
      : mTree (Nil)
    {}

    JSUTreeIterator (JSUTree&lt;T&gt;* tree)
      : mTree (tree)
    {}

    JSUTreeIterator&lt;T&gt;&amp;
    operator= (JSUTree&lt;T&gt;* tree)
    {
        mTree = tree;
        return *this;
    }

    T*
    getObject () const
    {
        return mTree-&gt;getObject();
    }

    BOOL
    operator== (JSUTree&lt;T&gt;* other)
    {
        return mTree == other;
    }

    BOOL
    operator!= (const JSUTree&lt;T&gt;* other) const
    {
        return mTree != other;
    }

    JSUTreeIterator&lt;T&gt;
    operator++ (int)
    {
        JSUTreeIterator&lt;T&gt; prev = *this;
        mTree                   = mTree-&gt;getNextChild();
        return prev;
    }

    JSUTreeIterator&lt;T&gt;&amp;
    operator++ ()
    {
        mTree = mTree-&gt;getNextChild();
        return *this;
    }

    JSUTreeIterator&lt;T&gt;
    operator-- (int)
    {
        JSUTreeIterator&lt;T&gt; prev = *this;
        mTree                   = mTree-&gt;getPrevChild();
        return prev;
    }

    JSUTreeIterator&lt;T&gt;&amp;
    operator-- ()
    {
        mTree = mTree-&gt;getPrevChild();
        return *this;
    }

    T&amp;
    operator* ()
    {
        return *getObject();
    }

    T*
    operator-&gt;() const
    {
        return mTree-&gt;getObject();
    }

private:
    JSUTree&lt;T&gt;* mTree;
};

#endif
</code></pre>
        <script src="../../search/main.js"></script>
    </div>
  </body>
</html>